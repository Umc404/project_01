<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../css/reset.css">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/강의평가.css">
</head>
<body>
    <header>
        <div class="inner">
            <!-- header -->
            <h1>
                <a href="">
                    <img src="../img/img_ezenInside2.png" alt="">
                </a>
            </h1>
            <ul class="top-menu">
                <li><a href="">로그인</a></li>
                <li><a href="">내정보</a></li>
                <li><a href="">쪽지</a></li>
            </ul>
            <nav class="nav">
                <ul>
                    <li><a href="" class="stress">공지사항</a></li>
                    <li><a href="" class="stress">자유게시판</a></li>
                    <li><a href="" class="stress">시간표</a></li>
                    <li><a href="" class="stress">강의평가</a></li>
                    <li><a href="" class="stress">학점계산기</a></li>
                </ul>
            </nav>
        </div>
    </header>
    <main>
        <div class="inner inner-detail">
            <div class="search detail-search">
                <p>일반화학1</p>
                <a href="강의평가개요.html" class="item">
                    <img src="../img/info.png" alt="">
                    <p>개요</p>
                </a>
                <a href="" class="item">
                    <img src="../img/rating.png" alt="">
                    <p>강의평</p>
                </a>
                <a href="" class="item">
                    <img src="../img/exam.png" alt="">
                    <p>시험 정보</p>
                </a>
                <a href="강의평가입력.html" class="write">평가하기</a>
            </div>
            <div class="board-list">
                <div id="feedback-display">
                    <!-- 여기에 평가 결과가 표시됩니다 -->
                </div>
            </div>
        </div>
    </main>
    <footer>
        <div class="inner">
            <!-- footer -->
            <div class="top-title bold">
                <span>이젠 아카데미 학원</span>
            </div>
            <div class="middle">
                <span>인천광역시</span>
                <span class="before">사업자등록번호: 000-00-00000</span>
                <span class="before">직업정보제공사업 신고번호: 0*14</span>
            </div>
            <div class="bottom">
                <span><a href="">이용약관</a></span>
                <span class="before bold"><a href="">개인정보처리방침</a></span>
                <span class="before"><a href="">청소년보호정책</a></span>
                <span class="before"><a href="">커뮤니티이용규칙</a></span>
                <span class="before"><a href="">문의하기</a></span>
                <span class="before"><a href="">ㅇㅇㅇ</a></span>
            </div>
    </footer>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const reviewDisplay = document.getElementById('feedback-display');
            
            // localStorage에서 데이터 가져오기
            const reviews = JSON.parse(localStorage.getItem('reviews')) || [];
            console.log(reviews);

            // 별점 이미지를 생성하는 함수
            const getStarRatingHtml = (rating) => {
                const fullStar = '<img src="../img/full_star.svg" alt="Full Star">';
                const emptyStar = '<img src="../img/star_empty.png" alt="Empty Star">';
                let starsHtml = '';

                for (let i = 0; i < 5; i++) {
                    starsHtml += i < rating ? fullStar : emptyStar;
                }
                return starsHtml;
            };

            // 최신 리뷰가 위로 오도록 배열을 역순으로 정렬하기
            const sortedReviews = reviews.slice().reverse(); // 원본 배열을 변경하지 않고 역순 배열을 생성

            // 데이터를 화면에 표시하기
            if (sortedReviews.length === 0) {
                reviewDisplay.innerHTML = '<p>작성된 리뷰가 없습니다.</p>';
            } else {
                reviewDisplay.innerHTML = sortedReviews.map((review, index) => `
                    <div class="review">
                        <div class="star-rating">
                            ${getStarRatingHtml(review.rating)}
                        </div>
                        <p>24년 1학기 수강자</p>
                        <p>총평: ${review.reviewText || '작성된 총평이 없습니다.'}</p>
                    </div>
                `).join('');
            }
        });
    </script>
</body>